{"title":"無料でReplitでバックエンドのサイトを常時起動する方法","tag":"Replit","subtag":"GAS","createtime":1657303618,"edittime":1657303618,"raw":"# はじめに\n[Replit](https://repl.it)で作ったサーバーサイド言語のサイトは、無料版だと、一定時間経つとスリープモードになり、次回アクセス時に起動まで平均30秒待たされる。 \n私は、サーバーサイド言語でAPIを作り、画像などを出力している（現にこの記事はAPIから取得している）のだが、スリープしてしまうと読み込み時に404エラーとなってしまい画像の表示ができない。\n\n# 結論\nGAS(GoogleAppsScript)を使い、一定間隔でそのサイトにアクセスし、スリープさせなくする（注: この方法は近々禁止されるかもしれないのでご注意を）。\n\nまず、[GASのサイト](https://script.google.com/)に行く。 \n左にある、「 <i class=\"fa-solid fa-plus-large\"></i> 新しいプロジェクト」を押す。 \n<img src=\"https://api-boubiroku.yuzupon1133.repl.co/?type=image&hash=ff9c480de856b1fb8e1f1653bf0b74a1\" height=\"200\">  \nすると、プログラムの編集画面が出るので、\n```\nfunction myFunction() {\n \n}\n```\nとなっているところを、\n```\nfunction myFunction() {\n UrlFetchApp.fetch(\"スリープさせたくないURL\", {\n   method: \"post\"\n });\n}\n\n```\nと上書きする。**例えば**このサイトだったら`\"https://boubiroku.yuzupon1133.repl.co\"`とする。 \n<img src=\"https://api-boubiroku.yuzupon1133.repl.co/?type=image&hash=da1d3a52cb255f95f574c8cecad90629\" height=\"230\">  \n次に、「 <i class=\"fa-regular fa-play\"></i> 実行」の左にある <i class=\"fa-regular fa-floppy-disk\"></i> のアイコンを押す（つまり、プロジェクトを「保存」する）。 \n<img src=\"https://api-boubiroku.yuzupon1133.repl.co/?type=image&hash=e11213d65cd1a2bd6bb9ab692403987a\" height=\"160\"> \n\n次に、一番左のタブから、「 <i class=\"fa-solid fa-alarm-clock\"></i> トリガー」を押す。  \n<img src=\"https://api-boubiroku.yuzupon1133.repl.co/?type=image&hash=5617f0eca092dd0277ae22abfde34561\" height=\"230\">  \n右下の<img src=\"https://api-boubiroku.yuzupon1133.repl.co/?type=image&hash=94679648884b4b0bedaca017b04a401f\" height=\"50\">  を押し、  \n「時間ベースのトリガーのタイプを選択」の項目を「時間ベース」から「分ベース」に、  \n「時間の間隔を選択（分）」の項目は「１分おき」から「５分おき」にしたら  \n下にある「保存」を押す（このとき保存が見えない場合は、下にスクロールするとある）。  \n<img src=\"https://api-boubiroku.yuzupon1133.repl.co/?type=image&hash=1d024e8739f962a75f7b88147d408bec\" height=\"400\">  \n> ※失敗しましたと出る場合は、ポップアップがブロックされている可能性がある。\n> <img src=\"https://api-boubiroku.yuzupon1133.repl.co/?type=image&hash=9a8cf88b4d4fbf0aa78acb0e310dd421\" height=\"100\">  \n> この場合は、アドレスバーの右のウィンドウアイコンを押して「ポップアップとリダイレクトを常に許可する」を押し、「完了」を押す。  \n> <img src=\"https://api-boubiroku.yuzupon1133.repl.co/?type=image&hash=51f634b8d5588206a634bc0cab69995b\" height=\"200\">  \n\nサブウィンドウが出てきたらアカウントを選択し、詳細を押して「安全ではないページに移動する」を押す。  \n<img src=\"https://api-boubiroku.yuzupon1133.repl.co/?type=image&hash=8bca123eeed3e636e1b439ef48ac946d\" height=\"400\">  \n**※この画面は、悪意があるプログラマーが便利プログラムなどと謳って個人情報を取得するプログラムを配布したりしていて、ユーザーが騙されて被害にあわないようにするための確認画面です。** \n\n次に、許可画面で権限を許可する。  \n<img src=\"https://api-boubiroku.yuzupon1133.repl.co/?type=image&hash=fcb4e7beccf4f2cb43e002c58a0201df\" height=\"400\">  \n\nこれで完了しました。サイトを閉じていただいてもかまいません。\nあとはGoogle側が5分に1回そのサイトにアクセスしてくれます。"}
